"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3598],{88393:function(e,n,r){r.d(n,{AS:function(){return f},Ac:function(){return y},h6:function(){return b}});var t=r(34051),o=r.n(t),u=r(18760),i=r(33943),l=r(3397);function s(e,n,r,t,o,u,i){try{var l=e[u](i),s=l.value}catch(c){return void r(c)}l.done?n(s):Promise.resolve(s).then(t,o)}function c(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var u=e.apply(n,r);function i(e){s(u,t,o,i,l,"next",e)}function l(e){s(u,t,o,i,l,"throw",e)}i(void 0)}))}}function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function d(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){a(e,n,r[n])}))}return e}function f(e){var n,r=e.atom,t=e.rootId,o=e.lessonId,u=e.userResponse,i=e.feedback;if(r.id)return{nodeId:r.id,rootId:t,lessonId:o,userResponse:d({},u,{isCorrect:i&&"is_correct"in i?i.is_correct:null!==(n=null===i||void 0===i?void 0:i.passed)&&void 0!==n?n:u.isCorrect})}}function v(e){var n,r=e.atom,t=e.rootId,o=e.lessonId,u=e.userResponse,i=e.feedback;if(r.id&&r.key&&r.content.evaluationId)return{nodeId:r.id,rootId:t,lessonId:o,userResponse:d({},u,{isCorrect:i&&"is_correct"in i?i.is_correct:null!==(n=null===i||void 0===i?void 0:i.passed)&&void 0!==n?n:u.isCorrect}),atomKey:r.key,atomId:r.id,evaluationId:r.content.evaluationId}}function p(e){var n,r=e.atom,t=e.rootId,o=e.lessonId,u=e.userResponse,i=e.operation,l=e.clientExecution;if(r.id&&r.key&&r.content.evaluationId)return{userResponse:u,operation:i,clientExecution:l,nodeId:r.id,atomId:r.id,atomKey:r.key,rootId:t,lessonId:o,evaluationId:null===r||void 0===r||null===(n=r.content)||void 0===n?void 0:n.evaluationId}}function y(e,n){return k.apply(this,arguments)}function k(){return(k=c(o().mark((function e(n,r){var t,u,i,s,c,a,y,k,b,m,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.atom,!((0,l.Xf)(t)||(0,l.nO)(t)||(0,l.q1)(t)||(0,l.Qy)(t))){e.next=12;break}if(u=f(n)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,r(u);case 7:if(!(i=e.sent)){e.next=11;break}return i.kind=l.bG.SimpleQuiz,e.abrupt("return",i);case 11:return e.abrupt("return",i);case 12:if(!(0,l.HB)(t)){e.next=23;break}if(s=v(d({},n,{atom:t}))){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,r(s);case 18:if(!(c=e.sent)){e.next=22;break}return c.kind=l.bG.ImageFormQuiz,e.abrupt("return",c);case 22:return e.abrupt("return",c);case 23:if(!(0,l.$h)(t)){e.next=34;break}if(a=p(d({},n,{atom:t}))){e.next=27;break}return e.abrupt("return");case 27:return e.next=29,r(a);case 29:if(!(y=e.sent)){e.next=33;break}return y.kind=l.bG.ProgrammingQuiz,e.abrupt("return",y);case 33:return e.abrupt("return",y);case 34:if(!(0,l.OH)(t)){e.next=45;break}if(k=p(d({},n,{atom:t}))){e.next=38;break}return e.abrupt("return");case 38:return e.next=40,r(k);case 40:if(!(b=e.sent)){e.next=44;break}return b.kind=l.bG.CodeGradedQuiz,e.abrupt("return",b);case 44:return e.abrupt("return",b);case 45:if(!(0,l.Dw)(t)){e.next=56;break}if(m=p(d({},n,{atom:t}))){e.next=49;break}return e.abrupt("return");case 49:return e.next=51,r(m);case 51:if(!(g=e.sent)){e.next=55;break}return g.kind=l.bG.IFrameQuiz,e.abrupt("return",g);case 55:return e.abrupt("return",g);case 56:return e.abrupt("return");case 57:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,n){var r,t=(0,i.SJ)(),o=null===(r=n.find((function(n){return n.program.key===e})))||void 0===r?void 0:r.program;if(!t)return o?o.key&&o.version&&o.locale?{key:o.key,version:o.version,locale:o.locale}:(console.error("Cannot fetch enrollment with a missing key, version, or locale"),null):null;var l,s,c,a,d=new URLSearchParams(window.location.search),f=null!==(s=null!==(l=d.get(u.Jq))&&void 0!==l?l:null===o||void 0===o?void 0:o.version)&&void 0!==s?s:"",v=null!==(a=null!==(c=d.get(u._1))&&void 0!==c?c:null===o||void 0===o?void 0:o.locale)&&void 0!==a?a:"";return{key:e,version:f,locale:v}}},63598:function(e,n,r){r.d(n,{r:function(){return v}});var t=r(67294),o=r(11163),u=r(18446),i=r.n(u),l=r(9493),s=r(40556),c=r(88393),a=r(69549);function d(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function f(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){d(e,n,r[n])}))}return e}var v=function(){var e=(0,o.useRouter)().query,n=e.nanodegreeKey,r=e.partKey,u=e.paidCourseKey,v=e.freeCourseKey,p=e.lessonKey,y=e.conceptKey,k=e.labKey,b=(0,a.B)(),m=b.enrollments,g=b.isFetchingEnrollments,h=(0,t.useState)({}),S=h[0],K=h[1],j=(0,t.useState)(null),C=j[0],E=j[1],I=(0,s.Q)(null!==C&&void 0!==C?C:l.skipToken),w=I.data,x=I.error,O=I.isSuccess,P=(0,s.OA)(null!==C&&void 0!==C?C:l.skipToken),B=P.data,R=P.error,A=P.isSuccess;(0,t.useEffect)((function(){O&&A&&K((function(e){return f({},e,d({},null===C||void 0===C?void 0:C.key,!0))}))}),[O,A,null===C||void 0===C?void 0:C.key]),(0,t.useEffect)((function(){x&&(K((function(e){return f({},e,d({},null===C||void 0===C?void 0:C.key,!0))})),console.error("Could not fetch nanodegree content"))}),[x,null===C||void 0===C?void 0:C.key]),(0,t.useEffect)((function(){R&&console.error("Could not fetch nanodegree user state")}),[R]);var M=(0,t.useMemo)((function(){var e;if(w&&B){var n,r,t,o,u,i,l=B.userStateByProgressKey,s=B.projectStateByProgressKey,c=B.partLocksByProgressKey;return f({},w,{userState:l[null!==(n=w.progressKey)&&void 0!==n?n:""],parts:null===w||void 0===w||null===(e=w.parts)||void 0===e?void 0:e.map((function(e){return f({},e,{lock:null===c||void 0===c?void 0:c[null!==(r=e.progressKey)&&void 0!==r?r:""],userState:l[null!==(t=e.progressKey)&&void 0!==t?t:""],lessons:e.lessons.map((function(e){var n,r;return f({},e,{project:e.project?f({},e.project,{projectState:s[null!==(o=null===(n=e.project)||void 0===n?void 0:n.progressKey)&&void 0!==o?o:""]}):void 0,userState:l[null!==(u=e.progressKey)&&void 0!==u?u:""],concepts:null===e||void 0===e||null===(r=e.concepts)||void 0===r?void 0:r.map((function(e){return f({},e,{userState:l[null!==(i=e.progressKey)&&void 0!==i?i:""]})}))})}))})}))})}}),[w,B]),T=(0,t.useMemo)((function(){var e;return null===M||void 0===M||null===(e=M.parts)||void 0===e?void 0:e.find((function(e){return e.key===r}))}),[M,r]),_=(0,t.useState)(null),F=_[0],Q=_[1],z=(0,s.K5)(null!==F&&void 0!==F?F:l.skipToken),G=z.data,U=z.error,D=z.isSuccess,q=(0,s.OJ)(null!==F&&void 0!==F?F:l.skipToken),J=q.data,L=q.error,$=q.isSuccess;(0,t.useEffect)((function(){D&&$&&K((function(e){return f({},e,d({},null===F||void 0===F?void 0:F.key,!0))}))}),[D,$,null===F||void 0===F?void 0:F.key]),(0,t.useEffect)((function(){U&&(K((function(e){return f({},e,d({},null===F||void 0===F?void 0:F.key,!0))})),console.error("Could not fetch paidCourse content"))}),[U,null===F||void 0===F?void 0:F.key]),(0,t.useEffect)((function(){L&&(K((function(e){return f({},e,d({},null===F||void 0===F?void 0:F.key,!0))})),console.error("Could not fetch paidCourse user state and project state"))}),[L,null===F||void 0===F?void 0:F.key]);var H=(0,t.useMemo)((function(){if(G&&J){var e,n,r,t,o=J.userStateByProgressKey,u=J.projectStateByProgressKey;return f({},G,{userState:o[null!==(e=G.progressKey)&&void 0!==e?e:""],lessons:null===G||void 0===G?void 0:G.lessons.map((function(e){var i,l;return f({},e,{project:e.project?f({},e.project,{projectState:u[null!==(n=null===(i=e.project)||void 0===i?void 0:i.progressKey)&&void 0!==n?n:""]}):void 0,userState:o[null!==(r=e.progressKey)&&void 0!==r?r:""],concepts:null===e||void 0===e||null===(l=e.concepts)||void 0===l?void 0:l.map((function(e){return f({},e,{userState:o[null!==(t=e.progressKey)&&void 0!==t?t:""]})}))})}))})}}),[G,J]),N=(0,t.useState)(null),W=N[0],X=N[1],Y=(0,s.eU)(null!==W&&void 0!==W?W:l.skipToken),V=Y.data,Z=Y.error,ee=Y.isSuccess,ne=(0,s.UL)(null!==W&&void 0!==W?W:l.skipToken),re=ne.data,te=ne.error,oe=ne.isSuccess;(0,t.useEffect)((function(){ee&&oe&&K((function(e){return f({},e,d({},null===W||void 0===W?void 0:W.key,!0))}))}),[ee,oe,null===W||void 0===W?void 0:W.key]),(0,t.useEffect)((function(){Z&&(K((function(e){return f({},e,d({},null===W||void 0===W?void 0:W.key,!0))})),console.error("Could not fetch freeCourse content"))}),[Z,null===W||void 0===W?void 0:W.key]),(0,t.useEffect)((function(){te&&(K((function(e){return f({},e,d({},null===W||void 0===W?void 0:W.key,!0))})),console.error("Could not fetch freeCourse user state and project state"))}),[te,null===W||void 0===W?void 0:W.key]);var ue,ie,le=(0,t.useMemo)((function(){if(V&&re){var e,n,r,t,o=re.userStateByProgressKey,u=re.projectStateByProgressKey;return f({},V,{userState:o[null!==(e=V.progressKey)&&void 0!==e?e:""],lessons:null===V||void 0===V?void 0:V.lessons.map((function(e){var i,l;return f({},e,{project:e.project?f({},e.project,{projectState:u[null!==(n=null===(i=e.project)||void 0===i?void 0:i.progressKey)&&void 0!==n?n:""]}):void 0,userState:o[null!==(r=e.progressKey)&&void 0!==r?r:""],concepts:null===e||void 0===e||null===(l=e.concepts)||void 0===l?void 0:l.map((function(e){return f({},e,{userState:o[null!==(t=e.progressKey)&&void 0!==t?t:""]})}))})}))})}}),[V,re]),se=(0,t.useMemo)((function(){var e;return null===(e=null!==(ue=null!==T&&void 0!==T?T:H)&&void 0!==ue?ue:le)||void 0===e?void 0:e.lessons.find((function(e){return e.key===p}))}),[le,p,H,T]),ce=(0,t.useMemo)((function(){var e;return null===se||void 0===se||null===(e=se.concepts)||void 0===e?void 0:e.find((function(e){return e.key===y}))}),[se,y]),ae=(0,t.useMemo)((function(){var e;return(null===se||void 0===se||null===(e=se.lab)||void 0===e?void 0:e.key)===k?null===se||void 0===se?void 0:se.lab:void 0}),[se,k]),de=(0,s.D9)(null!==(ie=null===ae||void 0===ae?void 0:ae.id)&&void 0!==ie?ie:l.skipToken),fe=de.data,ve=de.error;(0,t.useEffect)((function(){ve&&console.error("Could not fetch lab result for lesson")}),[ve]);var pe=(0,t.useCallback)((function(e){var n=(0,c.h6)(e,m);null===n||i()(n,C)||E(n),n||K((function(n){return f({},n,d({},e,!0))}))}),[m]);(0,t.useEffect)((function(){g||"string"===typeof n&&pe(n)}),[n,g]);var ye=(0,t.useCallback)((function(e){var n=(0,c.h6)(e,m);null===n||i()(n,F)||Q(n),n||K((function(n){return f({},n,d({},e,!0))}))}),[m]);(0,t.useEffect)((function(){g||"string"===typeof u&&ye(u)}),[u,g]);var ke=(0,t.useCallback)((function(e){var n=(0,c.h6)(e,m);null===n||i()(n,W)||X(n),n||K((function(n){return f({},n,d({},e,!0))}))}),[m]);(0,t.useEffect)((function(){g||"string"===typeof v&&ke(v)}),[v,g]);var be,me=(0,s.DR)((null===se||void 0===se?void 0:se.id)?se.id:l.skipToken),ge=me.data,he=me.error,Se=me.isFetching,Ke=me.isUninitialized;(0,t.useEffect)((function(){he&&console.error("Could not fetch lesson atoms")}),[he]);var je=(0,t.useMemo)((function(){return"string"===typeof y&&null!==(be=null===ge||void 0===ge?void 0:ge[y])&&void 0!==be?be:[]}),[ge,y]),Ce=n&&M||u&&H||v&&le;return{nanodegree:M,part:T,paidCourse:H,freeCourse:le,lesson:se,concept:ce,lab:ae,labResult:null===fe||void 0===fe?void 0:fe.result,atoms:je,isFetchLessonAtomsComplete:!Se&&!Ke,atomsByConceptKey:ge,requestedContentKeys:S,isPageEventReady:Ce}}},69549:function(e,n,r){r.d(n,{B:function(){return s}});var t=r(67294),o=r(40556),u=r(10037);function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function l(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,u=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(t=r.next()).done)&&(u.push(t.value),!n||u.length!==n);i=!0);}catch(s){l=!0,o=s}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return u}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return i(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=function(){var e,n=(0,o.WY)(),r=n.data,i=n.error,s=n.isFetching,c=n.refetch;(0,t.useEffect)((function(){i&&console.error("Could not fetch enrollments")}),[i]);var a=(0,t.useMemo)((function(){return null!==(e=null===r||void 0===r?void 0:r.map((function(e){return e.program.key})).filter(u.$).filter(u.K))&&void 0!==e?e:[]}),[r]),d=l((0,o.EJ)(),2),f=d[0],v=d[1].error;(0,t.useEffect)((function(){v&&console.error(v)}),[v]);return{enrollments:null!==r&&void 0!==r?r:[],enrollmentProgramKeys:a,isFetchingEnrollments:s,fetchEnrollmentsError:i,selectEnrollmentForKey:function(e){return null===r||void 0===r?void 0:r.find((function(n){return n.program.key===e}))},checkUpgradeEnrollment:function(e){e.id&&f(e.id).unwrap().then((function(n){(null===n||void 0===n?void 0:n.version)!==e.program.version&&window.location.reload()}))},refetchEnrollments:c}}}}]);